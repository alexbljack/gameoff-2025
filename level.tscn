[gd_scene load_steps=25 format=3 uid="uid://ce4f4u57jqa5y"]

[ext_resource type="Script" uid="uid://dg2x286sjjtgg" path="res://level.gd" id="1_oi3di"]
[ext_resource type="Texture2D" uid="uid://4cr4m0os7enb" path="res://assets/gridf.png" id="2_f2txt"]
[ext_resource type="PackedScene" uid="uid://dyl2x58uhkund" path="res://result_signal.tscn" id="3_0b4ue"]
[ext_resource type="PackedScene" uid="uid://cry4dg0ccj8om" path="res://source_signal.tscn" id="3_oi3di"]
[ext_resource type="PackedScene" uid="uid://cdhfqv7vb6awq" path="res://src/convertor/convertor.tscn" id="4_8b0r0"]
[ext_resource type="PackedScene" uid="uid://dlbl30nxgy6cy" path="res://confirm_button.tscn" id="8_2orkt"]
[ext_resource type="Texture2D" uid="uid://dwmo33oflb0lt" path="res://assets/help_btn.png" id="9_2orkt"]
[ext_resource type="FontFile" uid="uid://c7tmixruws4h5" path="res://assets/Blazma-Regular.ttf" id="9_8cye3"]
[ext_resource type="Texture2D" uid="uid://dq2pgwpw1575p" path="res://assets/help_btn_pressed.png" id="10_aicyk"]
[ext_resource type="Texture2D" uid="uid://b7n7rubydx6s4" path="res://assets/help_btn_hover.png" id="11_8b0r0"]
[ext_resource type="Script" uid="uid://bastk8hao8k8i" path="res://hint_button.gd" id="12_5pxul"]
[ext_resource type="PackedScene" uid="uid://dklkx4uxh7nxj" path="res://src/attempts/attempts.tscn" id="12_8b0r0"]
[ext_resource type="PackedScene" uid="uid://dy8c3o1ybfrwy" path="res://src/crt.tscn" id="13_8b0r0"]
[ext_resource type="PackedScene" uid="uid://b3dq0c83hkw8j" path="res://win_panel.tscn" id="13_h6smj"]
[ext_resource type="PackedScene" uid="uid://o2rht176mmgv" path="res://lose_panel.tscn" id="14_v5j5c"]

[sub_resource type="StyleBoxTexture" id="StyleBoxTexture_aicyk"]
texture = ExtResource("9_2orkt")

[sub_resource type="StyleBoxTexture" id="StyleBoxTexture_8b0r0"]
texture = ExtResource("10_aicyk")

[sub_resource type="StyleBoxTexture" id="StyleBoxTexture_h6smj"]
texture = ExtResource("11_8b0r0")

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_h6smj"]
bg_color = Color(0.16078432, 0.16078432, 0.16078432, 0.64705884)

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_h6smj"]

[sub_resource type="Shader" id="Shader_v5j5c"]
code = "shader_type canvas_item;

uniform float amplitude : hint_range(0.0, 200.0) = 10.0; // Смещение в пикселях
uniform float speed     : hint_range(0.0, 5.0)   = 1.0;  // Скорость
uniform float phase                           = 0.0;     // Для рассинхронизации нескольких спрайтов

void vertex() {
    float t = TIME * speed + phase;
    float offset_x = sin(t) * amplitude;
    float offset_y = cos(t * 1.3) * amplitude;

    // Сдвигаем весь прямоугольник спрайта в локальных пикселях
    VERTEX += vec2(offset_x, offset_y);
}"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_aicyk"]
shader = SubResource("Shader_v5j5c")
shader_parameter/amplitude = 5.0000002375
shader_parameter/speed = 1.0
shader_parameter/phase = 0.0

[sub_resource type="Shader" id="Shader_5pxul"]
code = "shader_type canvas_item;

uniform float amplitude : hint_range(0.0, 200.0) = 10.0; // Смещение в пикселях
uniform float speed     : hint_range(0.0, 5.0)   = 1.0;  // Скорость
uniform float phase                           = 0.0;     // Для рассинхронизации нескольких спрайтов

void vertex() {
    float t = TIME * speed + phase;
    float offset_x = sin(t) * amplitude;
    float offset_y = cos(t * 1.3) * amplitude;

    // Сдвигаем весь прямоугольник спрайта в локальных пикселях
    VERTEX += vec2(offset_x, offset_y);
}"

[sub_resource type="ShaderMaterial" id="ShaderMaterial_8b0r0"]
shader = SubResource("Shader_5pxul")
shader_parameter/amplitude = 3.0000001425
shader_parameter/speed = 2.000000095
shader_parameter/phase = 0.0

[node name="Level" type="Node2D"]
script = ExtResource("1_oi3di")

[node name="Background" type="CanvasLayer" parent="."]

[node name="Back" type="ColorRect" parent="Background"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
color = Color(9.024516e-08, 0.051215276, 0.08368423, 1)
metadata/_edit_lock_ = true

[node name="Grid" type="TextureRect" parent="Background"]
modulate = Color(1, 1, 1, 0.13725491)
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_right = 8.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("2_f2txt")
stretch_mode = 1
metadata/_edit_lock_ = true

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Convertor" parent="CanvasLayer" instance=ExtResource("4_8b0r0")]
offset_left = 832.0
offset_top = 248.0
offset_right = 1088.0
offset_bottom = 918.0

[node name="SourceSignals" type="Control" parent="CanvasLayer"]
layout_mode = 3
anchor_right = 0.558
anchor_bottom = 0.86700004
offset_left = 64.0
offset_top = 264.0
offset_right = -367.3601
offset_bottom = -32.360046
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="Source_1" parent="CanvasLayer/SourceSignals" instance=ExtResource("3_oi3di")]
layout_mode = 0

[node name="Source_2" parent="CanvasLayer/SourceSignals" instance=ExtResource("3_oi3di")]
layout_mode = 0
offset_left = 224.0
offset_right = 416.0

[node name="Source_3" parent="CanvasLayer/SourceSignals" instance=ExtResource("3_oi3di")]
layout_mode = 0
offset_left = 448.0
offset_right = 640.0

[node name="Source_4" parent="CanvasLayer/SourceSignals" instance=ExtResource("3_oi3di")]
layout_mode = 0
offset_top = 224.0
offset_bottom = 416.0

[node name="Source_5" parent="CanvasLayer/SourceSignals" instance=ExtResource("3_oi3di")]
layout_mode = 0
offset_left = 224.0
offset_top = 224.0
offset_right = 416.0
offset_bottom = 416.0

[node name="Source_6" parent="CanvasLayer/SourceSignals" instance=ExtResource("3_oi3di")]
layout_mode = 0
offset_left = 448.0
offset_top = 224.0
offset_right = 640.0
offset_bottom = 416.0

[node name="Source_7" parent="CanvasLayer/SourceSignals" instance=ExtResource("3_oi3di")]
layout_mode = 0
offset_top = 448.0
offset_bottom = 640.0

[node name="Source_8" parent="CanvasLayer/SourceSignals" instance=ExtResource("3_oi3di")]
layout_mode = 0
offset_left = 224.0
offset_top = 448.0
offset_right = 416.0
offset_bottom = 640.0

[node name="Source_9" parent="CanvasLayer/SourceSignals" instance=ExtResource("3_oi3di")]
layout_mode = 0
offset_left = 448.0
offset_top = 448.0
offset_right = 640.0
offset_bottom = 640.0

[node name="ResultSignal" parent="CanvasLayer" instance=ExtResource("3_0b4ue")]
offset_left = 1216.0
offset_top = 263.0
offset_right = 1216.64
offset_bottom = 262.55994

[node name="ConfirmButton" parent="CanvasLayer" instance=ExtResource("8_2orkt")]
z_index = 3
offset_left = 832.0
offset_top = 960.0
offset_right = 1088.0
offset_bottom = 1048.0

[node name="HintButton" type="Button" parent="CanvasLayer"]
offset_left = 288.0
offset_top = 976.0
offset_right = 480.0
offset_bottom = 1040.0
pivot_offset = Vector2(64, 20)
focus_mode = 0
theme_override_fonts/font = ExtResource("9_8cye3")
theme_override_font_sizes/font_size = 25
theme_override_styles/normal = SubResource("StyleBoxTexture_aicyk")
theme_override_styles/pressed = SubResource("StyleBoxTexture_8b0r0")
theme_override_styles/hover = SubResource("StyleBoxTexture_h6smj")
theme_override_styles/disabled = SubResource("StyleBoxFlat_h6smj")
theme_override_styles/focus = SubResource("StyleBoxEmpty_h6smj")
text = "Get hint"
script = ExtResource("12_5pxul")

[node name="Attempts" parent="CanvasLayer" instance=ExtResource("12_8b0r0")]
offset_left = -704.0
offset_top = -476.0
offset_right = -64.0

[node name="LevelLabel" type="Label" parent="CanvasLayer"]
material = SubResource("ShaderMaterial_aicyk")
offset_left = 64.0
offset_top = 48.0
offset_right = 400.0
offset_bottom = 131.0
theme_override_colors/font_color = Color(0.92182696, 0.99999696, 0.50211465, 1)
theme_override_colors/font_outline_color = Color(0.7490196, 0.78039217, 0, 1)
theme_override_constants/outline_size = 6
theme_override_fonts/font = ExtResource("9_8cye3")
theme_override_font_sizes/font_size = 72
text = "Level 10"
vertical_alignment = 1

[node name="ScoreLabel" type="Label" parent="CanvasLayer"]
material = SubResource("ShaderMaterial_8b0r0")
offset_left = 64.0
offset_top = 131.0
offset_right = 461.0
offset_bottom = 192.0
theme_override_colors/font_color = Color(1, 0.56743807, 0.99001366, 1)
theme_override_colors/font_outline_color = Color(0.8780115, 0.0006434119, 0.8822325, 1)
theme_override_constants/outline_size = 6
theme_override_fonts/font = ExtResource("9_8cye3")
theme_override_font_sizes/font_size = 46
text = "Score 10001"
vertical_alignment = 1

[node name="WinPanel" parent="CanvasLayer" instance=ExtResource("13_h6smj")]
visible = false
offset_left = 128.0
offset_top = 248.0
offset_right = 710.0
offset_bottom = 880.0

[node name="LosePanel" parent="CanvasLayer" instance=ExtResource("14_v5j5c")]
visible = false
offset_top = 256.0
offset_bottom = 880.04

[node name="Line2D" type="Line2D" parent="CanvasLayer"]
points = PackedVector2Array(1090, 576, 1212, 576)
width = 4.0
default_color = Color(0.9490196, 0, 0.9490196, 0.77254903)

[node name="CRT" parent="." instance=ExtResource("13_8b0r0")]

[connection signal="button_down" from="CanvasLayer/HintButton" to="." method="_on_hint_button_button_down"]
